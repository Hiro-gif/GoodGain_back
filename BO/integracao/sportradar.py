from BO.integracao.integracao import Integracao
import json


class Sportradar(Integracao):
    def __init__(self, key=None):
        self.key = key

    def pegar_versus_futebol(self):
        self.url = "https://api.sportradar.com/soccer-extended/trial/v4/pt/competitors/sr%3Acompetitor%3A44/versus/sr%3Acompetitor%3A42/summaries.json?api_key=uZYxYmzpVM89nwOKkd3Ao69uu1PXjt4vaDFhnXcD"

        self.headers = {"accept": "application/json"}
        self.body = {}
        # self.get(dumps=False)
        # return json.loads(self.response)
        #
        self.response = {  "competitors": [    {      "abbreviation": "string",      "age_group": "U23",      "country": "string",      "country_code": "string",      "form": "string",      "gender": "string",      "id": "string",      "name": "string",      "other_season_id": "string",      "qualifier": "home",      "virtual": True    }  ],  "generated_at": "2023-04-24T14:55:10.793Z",  "last_meetings": [    {      "sport_event": {        "channels": [          {            "country": "string",            "country_code": "string",            "name": "string",            "url": "string"          }        ],        "competitors": [          {            "abbreviation": "string",            "age_group": "U23",            "country": "string",            "country_code": "string",            "form": "string",            "gender": "string",            "id": "string",            "name": "string",            "other_season_id": "string",            "qualifier": "home",            "virtual": True          }        ],        "coverage": {          "competition_properties": {            "brackets": True,            "missing_players": True,            "player_transfer_history": True,            "schedules": True,            "season_player_statistics": True,            "season_probabilities": True,            "season_stats_leaders": True,            "season_team_statistics": True,            "standings": "live",            "team_squads": True          },          "group_properties": {            "brackets": True,            "cup": True,            "group_stage": True,            "league": True,            "missing_players": True,            "qualification": True,            "results": True,            "schedules": True,            "standings": "live"          },          "sport_event_properties": {            "advanced_data": "false",            "ballspotting": True,            "basic_play_by_play": True,            "basic_player_stats": True,            "basic_team_stats": True,            "commentary": True,            "deeper_play_by_play": True,            "deeper_player_stats": True,            "deeper_team_stats": True,            "fun_facts": True,            "game_clock": True,            "goal_scorers": True,            "lineups": True,            "lineups_availability": "pre",            "probabilities": True,            "scores": "live",            "venue": True          },          "type": "sport_event"        },        "id": "string",        "replaced_by": "string",        "resume_time": "2023-04-24T14:55:10.793Z",        "sport_event_conditions": {          "attendance": {            "count": 0          },          "comment": {            "text": "string"          },          "ground": {            "neutral": True          },          "lineups": {            "confirmed": True          },          "referees": [            {              "country_code": "string",              "id": "string",              "name": "string",              "nationality": "string",              "type": "first_assistant_referee"            }          ],          "weather": {            "overall_conditions": "good",            "pitch_conditions": "good"          }        },        "sport_event_context": {          "category": {            "country_code": "string",            "id": "string",            "name": "string"          },          "competition": {            "gender": "string",            "id": "string",            "name": "string",            "parent_id": "string",            "type": "string"          },          "groups": [            {              "group_name": "string",              "id": "string",              "name": "string"            }          ],          "round": {            "competition_sport_event_number": 0,            "cup_round_id": "string",            "cup_round_number_of_sport_events": 0,            "cup_round_sport_event_number": 0,            "name": "string",            "number": 0,            "other_sport_event_id": "string"          },          "season": {            "competition_id": "string",            "disabled": True,            "end_date": "2023-04-24",            "id": "string",            "name": "string",            "start_date": "2023-04-24",            "year": "string"          },          "sport": {            "id": "string",            "name": "string"          },          "stage": {            "end_date": "2023-04-24",            "order": 0,            "phase": "stage_1_playoff",            "start_date": "2023-04-24",            "type": "cup",            "year": "string"          }        },        "start_time": "2023-04-24T14:55:10.793Z",        "start_time_confirmed": True,        "venue": {          "capacity": 0,          "changed": True,          "city_name": "string",          "country_code": "string",          "country_name": "string",          "id": "string",          "map_coordinates": "string",          "name": "string",          "reduced_capacity": True,          "reduced_capacity_max": 0,          "timezone": "string"        }      },      "sport_event_status": {        "aggregate_away_score": 0,        "aggregate_home_score": 0,        "aggregate_winner_id": "string",        "away_normaltime_score": 0,        "away_overtime_score": 0,        "away_score": 0,        "ball_locations": [          {            "order": 1,            "qualifier": "home",            "x": 35,            "y": 48          }        ],        "clock": {          "played": "string",          "stoppage_time_announced": "string",          "stoppage_time_played": "string"        },        "decided_by_fed": True,        "home_normaltime_score": 0,        "home_overtime_score": 0,        "home_score": 0,        "match_situation": {          "qualifier": "home",          "status": "safe",          "updated_at": "2023-04-24T14:55:10.793Z"        },        "match_status": "not_started",        "match_tie": True,        "period_scores": [          {            "away_score": 0,            "home_score": 0,            "number": 0,            "type": "regular_period"          }        ],        "scout_abandoned": True,        "status": "not_started",        "winner_id": "string"      }    }  ],  "next_meetings": [    {      "sport_event": {        "channels": [          {            "country": "string",            "country_code": "string",            "name": "string",            "url": "string"          }        ],        "competitors": [          {            "abbreviation": "string",            "age_group": "U23",            "country": "string",            "country_code": "string",            "form": "string",            "gender": "string",            "id": "string",            "name": "string",            "other_season_id": "string",            "qualifier": "home",            "virtual": True          }        ],        "coverage": {          "competition_properties": {            "brackets": True,            "missing_players": True,            "player_transfer_history": True,            "schedules": True,            "season_player_statistics": True,            "season_probabilities": True,            "season_stats_leaders": True,            "season_team_statistics": True,            "standings": "live",            "team_squads": True          },          "group_properties": {            "brackets": True,            "cup": True,            "group_stage": True,            "league": True,            "missing_players": True,            "qualification": True,            "results": True,            "schedules": True,            "standings": "live"          },          "sport_event_properties": {            "advanced_data": "false",            "ballspotting": True,            "basic_play_by_play": True,            "basic_player_stats": True,            "basic_team_stats": True,            "commentary": True,            "deeper_play_by_play": True,            "deeper_player_stats": True,            "deeper_team_stats": True,            "fun_facts": True,            "game_clock": True,            "goal_scorers": True,            "lineups": True,            "lineups_availability": "pre",            "probabilities": True,            "scores": "live",            "venue": True          },          "type": "sport_event"        },        "id": "string",        "replaced_by": "string",        "resume_time": "2023-04-24T14:55:10.793Z",        "sport_event_conditions": {          "attendance": {            "count": 0          },          "comment": {            "text": "string"          },          "ground": {            "neutral": True          },          "lineups": {            "confirmed": True          },          "referees": [            {              "country_code": "string",              "id": "string",              "name": "string",              "nationality": "string",              "type": "first_assistant_referee"            }          ],          "weather": {            "overall_conditions": "good",            "pitch_conditions": "good"          }        },        "sport_event_context": {          "category": {            "country_code": "string",            "id": "string",            "name": "string"          },          "competition": {            "gender": "string",            "id": "string",            "name": "string",            "parent_id": "string",            "type": "string"          },          "groups": [            {              "group_name": "string",              "id": "string",              "name": "string"            }          ],          "round": {            "competition_sport_event_number": 0,            "cup_round_id": "string",            "cup_round_number_of_sport_events": 0,            "cup_round_sport_event_number": 0,            "name": "string",            "number": 0,            "other_sport_event_id": "string"          },          "season": {            "competition_id": "string",            "disabled": True,            "end_date": "2023-04-24",            "id": "string",            "name": "string",            "start_date": "2023-04-24",            "year": "string"          },          "sport": {            "id": "string",            "name": "string"          },          "stage": {            "end_date": "2023-04-24",            "order": 0,            "phase": "stage_1_playoff",            "start_date": "2023-04-24",            "type": "cup",            "year": "string"          }        },        "start_time": "2023-04-24T14:55:10.794Z",        "start_time_confirmed": True,        "venue": {          "capacity": 0,          "changed": True,          "city_name": "string",          "country_code": "string",          "country_name": "string",          "id": "string",          "map_coordinates": "string",          "name": "string",          "reduced_capacity": True,          "reduced_capacity_max": 0,          "timezone": "string"        }      },      "sport_event_status": {        "aggregate_away_score": 0,        "aggregate_home_score": 0,        "aggregate_winner_id": "string",        "away_normaltime_score": 0,        "away_overtime_score": 0,        "away_score": 0,        "ball_locations": [          {            "order": 1,            "qualifier": "home",            "x": 35,            "y": 48          }        ],        "clock": {          "played": "string",          "stoppage_time_announced": "string",          "stoppage_time_played": "string"        },        "decided_by_fed": True,        "home_normaltime_score": 0,        "home_overtime_score": 0,        "home_score": 0,        "match_situation": {          "qualifier": "home",          "status": "safe",          "updated_at": "2023-04-24T14:55:10.794Z"        },        "match_status": "not_started",        "match_tie": True,        "period_scores": [          {            "away_score": 0,            "home_score": 0,            "number": 0,            "type": "regular_period"          }        ],        "scout_abandoned": True,        "status": "not_started",        "winner_id": "string"      }    }  ]}
        return self.response

    def atualizar_dados(self):
        dados = self.pegar_versus_futebol()
        import core.esporte.models
        for encontros_passados in dados.get('last_meetings'):

            esporte = core.esporte.models.Esporte.objects.filter(id=encontros_passados.get('sport_event').get('sport_event_context').get('sport').get('id'))
            if not esporte:
                esporte = core.esporte.models.Esporte()
            esporte.nome = encontros_passados.get('sport_event').get('sport_event_context').get('sport').get('name')


            time = core.esporte.models.Time

            campeonato = core.esporte.models.Campeonato
            evento = core.esporte.models.Evento


        return True
